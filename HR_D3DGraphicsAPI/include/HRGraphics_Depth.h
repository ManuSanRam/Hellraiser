#pragma once

#include "HRGraphics_Prerequisites.h"

/*!******************************************************************************************************************************************************************************

	@file		HRGraphics_Depth.h

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

	This file contains the declaration of the Rasterizer object, used to present graphics as:
	- Wireframe, rendering only the edges that connect the vertices.
	- Solid, rendering the model as it would normally look.
	- Solid - wireframe, rendering the model in solid and wireframe

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

	@date		31-07-2017
	@author		Manuel Santos Ramón [ManuSanRam]
	@copyright	Infernal Coders S.A

********************************************************************************************************************************************************************************/



namespace HR_SDK
{
	struct GraphicsDevice;
	struct GraphicsDeviceContext;
	struct GraphicsRenderTargetView;
	struct GraphicsDepthStencilBuffer;
	struct GraphicsDepthStencilState;
	struct GraphicsDepthStencilView;

	/*!**************************************************************************************************************************************************************************

		@class C_DepthStencil

		@brief Object to describe the depth buffer, stencil buffer, depth-stencil

	****************************************************************************************************************************************************************************/
	class HR_D3DGRAPHICSAPI_EXPORT C_DepthStencil
	{
	public:
		/*!**********************************************************************************************************************************************************************
		
			@brief Constructor [Default]
		
		************************************************************************************************************************************************************************/
		C_DepthStencil
		(

		)
		{
			m_DSB = NULL;
			m_DSS = NULL;
			m_DSV = NULL;
		}



		/*!**********************************************************************************************************************************************************************
		
			@brief Destructor
		
		************************************************************************************************************************************************************************/
		~C_DepthStencil
		(

		)
		{
			
		}



		/*!**********************************************************************************************************************************************************************
		
			@brief Creates the depth buffer

		-------------------------------------------------------------------------------------------------------------------------------------------------------------------------

			@param _width Width of the texture buffer
			@param _height Height of the texture
			@param _format Format of the texture buffer
			@param _usage Usage of th texture buffer (Usage is default)
			@param _bind Binding of the texture buffer (Binding is DEPTH_STENCIL)
			@param _device device where the depth stencil will be allocated.

		-------------------------------------------------------------------------------------------------------------------------------------------------------------------------

			@return True, if the depth buffer was successfully created. False, if an error was encountered.

		************************************************************************************************************************************************************************/
		bool CreateDSBuffer
		(
			uint32			_width,
			uint32			_height,
			DXGI_Formats::E	_format,
			D3D_Usages::E	_usage,
			D3D_Binds::E	_bind,
			GraphicsDevice*	_device
		);



		/*!**********************************************************************************************************************************************************************

			@brief Creates the depth state

		-------------------------------------------------------------------------------------------------------------------------------------------------------------------------

			@param _device
			@param _devContext

		-------------------------------------------------------------------------------------------------------------------------------------------------------------------------

			@return True, if the state was successfully created in the device. False if any error was encountered

		************************************************************************************************************************************************************************/
		bool CreateDSState
		(
			GraphicsDevice*			_device, 
			GraphicsDeviceContext*	_devContext
		);



		/*!**********************************************************************************************************************************************************************

			@brief Creates the depth view

		-------------------------------------------------------------------------------------------------------------------------------------------------------------------------

			@param _device

		-------------------------------------------------------------------------------------------------------------------------------------------------------------------------

			@return

		************************************************************************************************************************************************************************/
		bool CreateDSView
		(
			GraphicsDevice*				_device
		);
		


		/*!**********************************************************************************************************************************************************************

			@brief Clears the depth buffer whenever the depth of the rendered geometry changes

		-------------------------------------------------------------------------------------------------------------------------------------------------------------------------

			@param _DC

		************************************************************************************************************************************************************************/
		void ClearDSV
		(
			GraphicsDeviceContext* prm_DC
		);


		/*!**********************************************************************************************************************************************************************

			@brief Closes and deallocates all DEPTH objects and from the pipeline

		************************************************************************************************************************************************************************/
		void Close
		(

		);



		/*!**********************************************************************************************************************************************************************

			@brief Buffer containing the depth of the geometry, how far is an object

		************************************************************************************************************************************************************************/
		GraphicsDepthStencilBuffer*			m_DSB;


		/*!**********************************************************************************************************************************************************************

			@brief State of the depth object

		************************************************************************************************************************************************************************/
		GraphicsDepthStencilState*			m_DSS;


		/*!**********************************************************************************************************************************************************************

			@brief Depth stencil view object

		************************************************************************************************************************************************************************/
		GraphicsDepthStencilView*			m_DSV;
	};
}