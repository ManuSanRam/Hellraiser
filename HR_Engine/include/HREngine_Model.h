#pragma once



#include "HREngine_Prerequisites.h"

#include <types.h>
#include <Importer.hpp>
#include <scene.h>
#include <postprocess.h>
#include <mesh.h>

#include "HREngine_Mesh.h"
#include "HREngine_Material.h"



/*!******************************************************************************************************************************************************************************

	@file		HREngine_Model.h

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

	This file contains the declaration of the C_Model class.
	This class is used to load 3D model files (.OBJ, .FBX, .PHY), the meshes that compose the model and the materials it uses to be drawn and shaded.

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

	@date		30-08-2017
	@author		Manuel Santos Ramón [ManuSanRam]
	@copyright	Infernal Coders S.A

********************************************************************************************************************************************************************************/



using namespace Assimp;



namespace HR_SDK
{
	/*!**************************************************************************************************************************************************************************

		@class C_Model

	-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------

		@brief

	****************************************************************************************************************************************************************************/
	class HR_ENGINE_EXPORT C_Model
	{
	public:
		/*!**********************************************************************************************************************************************************************

			@brief Constructor [Default]

		************************************************************************************************************************************************************************/
		C_Model()
		{

		}



		/*!**********************************************************************************************************************************************************************

			@brief Destructor

		************************************************************************************************************************************************************************/
		~C_Model()
		{

		}



		/*!**********************************************************************************************************************************************************************



		************************************************************************************************************************************************************************/
		bool Load
		(
			const String&		_fileName
		);



		/*!**********************************************************************************************************************************************************************



		************************************************************************************************************************************************************************/
		bool Init
		(
			const aiScene*		_scene,
			const String&		_fileName
		);



		/*!**********************************************************************************************************************************************************************

			@brief

		-------------------------------------------------------------------------------------------------------------------------------------------------------------------------

			@param

			@param

		************************************************************************************************************************************************************************/
		void InitMesh
		(
			uint32				_index,
			const aiMesh*		_mesh
		);



		/*!**********************************************************************************************************************************************************************
		

		
		************************************************************************************************************************************************************************/
		bool InitMaterials
		(
			const aiScene*		_scene,
			const String&		_fileName
		);



		/*!**********************************************************************************************************************************************************************



		************************************************************************************************************************************************************************/
		void Render
		(

		);
		


		/*!**********************************************************************************************************************************************************************



		************************************************************************************************************************************************************************/
		void Close
		(

		);



		/*!**********************************************************************************************************************************************************************



		************************************************************************************************************************************************************************/
		Vector<C_Mesh*>		m_Meshes;



		/*!**********************************************************************************************************************************************************************



		************************************************************************************************************************************************************************/
		Vector<C_Material*>	m_Materials;
	};
}